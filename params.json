{"name":"Carabid Workshop","tagline":"A workshop about understanding NEON carabid data","body":"![](http://www.neoninc.org/sites/default/files/styles/fullwidth/public/image-content-images/siteDesign.jpg?itok=xRlVnMEk)\r\n###A NEON #WorkWithData Event\r\n\r\n**Date:** 15 November 2015 - Entomological Society of America Meeting\r\n\r\n**Location:** Minneapolis, Minnesota - Minneapolis Convention Center Rm 208 AB\r\n\r\n<h2>Background Materials</h2>\r\n\r\n<h3>Things to Do Before the Workshop</h3>\r\n\r\nThis is a demonstration based brown-bag and thus nothing is required to attend\r\nthis workshop! However, the data used in the workshop are available to download\r\nfor further exploration.\r\n\r\n<h3>Other Resources</h3>\r\nMany resources demonstrating the use of different NEON data products are available at [NEON data skills.org](http://neondataskills.org/Data-Workshops/). New material is being added all the time, so check back frequently!\r\n\r\n<h4>Download The Data</h4>\r\n\r\n###Workshop Instructor\r\n* **[Katherine LeVan](http://www.neoninc.org/about/staff/katie-levan) @klevan**, \r\nStaff Scientist, NEON, Inc \r\n\r\n## #WorkWithData Hashtag\r\n  \r\nPlease tweet using the hashtag: #WorkWithData\" during this workshop!\r\nAlso you can tweet at <a href=\"https://twitter.com/neoninc\" target=\"_blank\"> @neoninc</a>!\r\n\r\n\r\n## SCHEDULE\r\n\r\nPlease note that we are still developing the agenda for this workshop. The \r\nschedule below is subject to change.\r\n\r\n\r\n| Time        | Topic         | \r\n|-------------|---------------|\r\n| 1:00     | About NEON |\r\n| 1:30     | A look at Carabid patterns and trends |\r\n| 2:00     | Partner projects |\r\n| 2:45 | Q&A |\r\n| 3:00 | ------- Wrap Up! ------- |\r\n\r\n#About the Data\r\nThe carabid data that we will use for this brown-bag were collected at 13 sites in 2014. NEON carabid data are stored in three tables: field collection data, sorting data and pinning data. \r\n\r\n## Field Collection Data\r\nContains information related to the location of each trap (i.e., latitude, longitude, NLCD class) and metadata about the sampling event (i.e., when traps were set, 'setDate'; the date of trap collection, 'collectDate'; the number of days a given trap was in the field, 'daysOfTrapping'). Unique collection events have a unique sampleID (format = plotID.trapID.collectDate).\r\n\r\n![Insect collection by pitfall trapping](https://farm6.staticflickr.com/5311/5860792533_d02d0bdf8a_b.jpg)\r\n\r\n## Sorting Data\r\nContains information about what specimens were found in traps. Sample types include vertebrate bycatch (herptiles = 'vert bycatch herp'; mammals = 'vert bycatch mam'), non-Carabidae invertebrate bycatch (labelled 'invert bycatch'), and all information about carabids. Older data (2014 and prior) divide Carabid data into two categories: 'common carabid', for which all taxonomic and abundance data is listed in the sorting dataset, and 'other carabid', a catch-all category indicating that the relevant taxonomic and abundance information for specimens with that sampleID is provided in the pinning dataset. Unique records have a unique 'associatedSampleID' (format = plotID.trapID.collectDate.taxonID.tubeID; records where taxonomic information is unknown use shorthand codes based on sampleType-'ib' for invertebrate bycatch, 'vb' for vertebrate bycatch, 'cc' for common carabid, 'oc' for other carabid).\r\n\r\n![A mixed sample from a Carabid trap](https://farm6.staticflickr.com/5159/5861346198_dcd8fb7a6f_b.jpg)\r\n\r\n## Pinning data \r\nContains information about all carabids that were pinned or pointed. Each sample in the pinning dataset has a unique identifier (individualID). The information in the pinning table are traceable to the sorting data via the a sampleID. Every 'sampleID' in the pinning data matches an 'associatedSampleID' in the sorting dataset. \r\n\r\n![A pinned Euryderus grossus](http://www.boldsystems.org/pics/NEONT/carabid546%2B1259940908.jpg)\r\n\r\n## Data Format\r\nWhen downloaded from the portal, all data is divided by site. To look at all 13 sites from 2014 will require downloading 39 files (one field, sorting and pinning data for each site) and combining the datasheets across all sites for each type of data (i.e., field, sorting and pinning). I've included an R script that combines and cleans the 2014 data for easy use (available here: [data-cleanup.R](code/data-cleanup.R)) and the 39 original data files (located here zipped: [portal download](data/portal%20download/2014%20beetle%20data.zip)). However, for those that just want the csv files that are the end result, I have provided them [here](data/cleaned%20data/cleaned%20data.zip). Weather data from NOAA for these 13 sites can be found [here](data/NOAA%20weather%20data%20for%202014.csv).\r\n \r\n# Looking at the data\r\n\r\n## Field Collection \r\nA brief look at the data shows that most sites collect all 40 traps on a 14 day interval; 81% of traps were collected on the 14 day cycle exactly and 62% collected absolutely every trap during a collection bout. Deviations were minor and in more than 85% of cases, field operations staff were able to reach at least 8 of 10 plots.\r\n\r\n    par(mfrow=c(1,2))\r\n    hist(bet_field$daysOfTrapping,xlim=c(0,30),col=\"black\",main=\"Typical sampling interval\",xlab=\"Days of trapping\")\r\n    bet_field %>% count(siteID,boutNumber) -> numTrapsDeployed\r\n    hist(numTrapsDeployed$n,xlim=c(0,40),col=\"black\",main=\"Typical number of traps deployed\",xlab=\"Number of traps per site per bout\")\r\n\r\n![](images/sampling%20interval.png)\r\n\r\n## Trends and Patterns\r\nDoes latitude explain beetle abundance or richness? The relationship can be examined at the level of the trap, the plot or the site; but the pattern may be driven by substantial variation seen in the middle latitudes. \r\n\r\n    plot(Dmap,col=\"#ADA96E\",bg='#77BFC7',main='Beetle Abundance by Site',cex.main=3)\r\n    sites <- sites[order(sites[,'numCarabidsCaught']),]\r\n    sites$intensity <- heat.colors(13)[13:1]\r\n    sites$cex <- c(rep(1,4),rep(1.5,2),rep(2,4),rep(2.5,1),rep(3,1),rep(3.5,1))\r\n    points(sites$decimalLongitude,sites$decimalLatitude,bg=sites$intensity,cex=sites$cex,pch=21)\r\n\r\n![Map of beetle abundance](images/by_site_abundance_map.png)\r\n\r\n    plot(Dmap,col=\"#ADA96E\",bg='#77BFC7',main='Beetle Richness by Site',cex.main=3)\r\n    sites <- sites[order(sites[,'beetleRichness']),]\r\n    sites$intensity <- heat.colors(13)[13:1] \r\n    sites$cex <- c(rep(1,4),rep(1.5,2),rep(2,4),rep(2.5,1),rep(3,1),rep(3.5,1))\r\n    points(sites$decimalLongitude,sites$decimalLatitude,bg=sites$intensity,cex=sites$cex,pch=21)\r\n\r\n![Map of beetle richness](images/by_site_richness_map.png)\r\n\r\n### Plotting latitudinal gradients of beetle abundance and richness at the trap level\r\n\r\n    plot(bet_field$decimalLatitude,bet_field$beetleAbundance,xlab='Latitude',ylab='Beetle Abundance',pch=21,bg=\"darkblue\")\r\n    plot(bet_field$decimalLatitude,bet_field$beetleRichness,xlab='Latitude',ylab='Beetle Richness',pch=21,bg=\"darkblue\")\r\n\r\n![Latitudinal gradients of beetle abundance and richness; data at the trap level](images/by_trap.png)\r\n\r\n### Plotting latitudinal gradients of beetle abundance and richness at the plot level\r\n\r\n    plot(bet_field_plot$decimalLatitude,bet_field_plot$beetleAbundance,xlab='Latitude',ylab='Beetle Abundance',pch=21,bg=\"turquoise\")\r\n    plot(bet_field_plot$decimalLatitude,bet_field_plot$beetleRichness,xlab='Latitude',ylab='Beetle Richness',pch=21,bg=\"turquoise\")\r\n\r\n![Latitudinal gradients of beetle abundance and richness; data summarized at the plot level](images/by_plot.png)\r\n\r\n### Plotting latitudinal gradients of beetle abundance and richness at the bout level\r\n\r\n    plot(bet_field_bout$decimalLatitude,bet_field_bout$beetleAbundance,xlab='Latitude',ylab='Beetle Abundance',pch=21,bg=\"deepskyblue\")\r\n    plot(bet_field_bout$decimalLatitude,bet_field_bout$beetleRichness,xlab='Latitude',ylab='Beetle Richness',pch=21,bg=\"deepskyblue\")\r\n\r\n![Latitudinal gradients of beetle abundance and richness; data summarized at the collection bout level](images/by_bout.png)\r\n\r\n### Precipitation and beetle distributions\r\n\r\nPrecipitation was not homogeneous and largely fell in the southern and eastern US. Patterns of beetle abundance varied accordingly.\r\n\r\n    plot(Dmap,col=\"#ADA96E\",bg='#77BFC7',main='Precipitation by Site',cex.main=3)\r\n    sites <- sites[order(sites[,'prcp']),]\r\n    sites$intensity <- c(rep('white',3),rep('lightblue',3),rep('turquoise',3),rep('deepskyblue',2),'blue','darkblue')\r\n    sites$cex <- c(rep(1,3),rep(1.5,3),rep(2,3),rep(2.5,2),rep(3,1),rep(3.5,1))\r\n    points(sites$decimalLongitude,sites$decimalLatitude,bg=sites$intensity,cex=sites$cex,pch=21)\r\n\r\n![Distribution of rainfall at across sites](images/by_site_rainfall_map.png)\r\n\r\n    plot(bet_field$prcp,bet_field$beetleAbundance,xlab='Precipitation (mm)',ylab='Beetle Abundance per trap',bg='blue',pch=21)\r\n    plot(bet_field_plot$prcp,bet_field_plot$beetleAbundance,xlab='Precipitation (mm)',ylab='Beetle Abundance per plot',bg='darkblue',pch=21)\r\n\r\n![Effect of rainfall on measured beetle abundance](images/rainfall.png)\r\n\r\n### Habitat and beetle distributions\r\n\r\nNLCD class is an included variable describing the habitat in which traps are embedded. Habitat type certainly seems to influence observed abundance and (to a lesser extent) richness.\r\n\r\n    par(mar=c(15,4.1,4.1,2.5))\r\n    nlcd$color <- c('goldenrod',rep('darkolivegreen1',2),'darkolivegreen2','darkolivegreen3',rep('forestgreen',3),'darkgreen')\r\n    barplot(nlcd$beetleAbundance,names.arg=nlcd$types,col=nlcd$color,ylab=\"Beetle Abundance\",xlab=\"\",las=2)\r\n    barplot(nlcd$beetleRichness,names.arg=nlcd$types,col=nlcd$color,ylab=\"Beetle Richness\",xlab=\"\",las=2)\r\n\r\n![Effect of habitat type on measured beetle abundance](images/nlcd_abundance.png)\r\n![Effect of habitat type on measured beetle richness](images/nlcd_richness.png)","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}