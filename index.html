<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-dark.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>Carabid Workshop by klevan</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>Carabid Workshop</h1>
          <h2>A workshop about understanding NEON carabid data</h2>
        </header>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/klevan/carabid-workshop/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
          <a href="https://github.com/klevan/carabid-workshop/tarball/master" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
          <a href="https://github.com/klevan/carabid-workshop" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
          <p><img src="http://www.neoninc.org/sites/default/files/styles/fullwidth/public/image-content-images/siteDesign.jpg?itok=xRlVnMEk" alt=""></p>

<h3>
<a id="a-neon-workwithdata-event" class="anchor" href="#a-neon-workwithdata-event" aria-hidden="true"><span class="octicon octicon-link"></span></a>A NEON #WorkWithData Event</h3>

<p><strong>Date:</strong> 15 November 2015 - Entomological Society of America Meeting</p>

<p><strong>Location:</strong> Minneapolis, Minnesota - Minneapolis Convention Center Rm 208 AB</p>

<h2>
<a id="background-materials" class="anchor" href="#background-materials" aria-hidden="true"><span class="octicon octicon-link"></span></a>Background Materials</h2>

<h3>
<a id="things-to-do-before-the-workshop" class="anchor" href="#things-to-do-before-the-workshop" aria-hidden="true"><span class="octicon octicon-link"></span></a>Things to Do Before the Workshop</h3>

<p>This is a demonstration based brown-bag and thus nothing is required to attend
this workshop! However, the data used in the workshop are available to download
for further exploration.</p>

<h3>
<a id="other-resources" class="anchor" href="#other-resources" aria-hidden="true"><span class="octicon octicon-link"></span></a>Other Resources</h3>

<p>Many resources demonstrating the use of different NEON data products are available at <a href="http://neondataskills.org/Data-Workshops/">NEON data skills.org</a>. New material is being added all the time, so check back frequently!</p>

<h4>
<a id="download-the-data" class="anchor" href="#download-the-data" aria-hidden="true"><span class="octicon octicon-link"></span></a>Download The Data</h4>

<h3>
<a id="workshop-instructor" class="anchor" href="#workshop-instructor" aria-hidden="true"><span class="octicon octicon-link"></span></a>Workshop Instructor</h3>

<ul>
<li>
<strong><a href="http://www.neoninc.org/about/staff/katie-levan">Katherine LeVan</a> <a href="https://github.com/klevan" class="user-mention">@klevan</a></strong>, 
Staff Scientist, NEON, Inc </li>
</ul>

<h2>
<a id="workwithdata-hashtag" class="anchor" href="#workwithdata-hashtag" aria-hidden="true"><span class="octicon octicon-link"></span></a>#WorkWithData Hashtag</h2>

<p>Please tweet using the hashtag: #WorkWithData" during this workshop!
Also you can tweet at <a href="https://twitter.com/neoninc" target="_blank"> @neoninc</a>!</p>

<h2>
<a id="schedule" class="anchor" href="#schedule" aria-hidden="true"><span class="octicon octicon-link"></span></a>SCHEDULE</h2>

<p>Please note that we are still developing the agenda for this workshop. The 
schedule below is subject to change.</p>

<table>
<thead>
<tr>
<th>Time</th>
<th>Topic</th>
</tr>
</thead>
<tbody>
<tr>
<td>1:00</td>
<td>About NEON</td>
</tr>
<tr>
<td>1:30</td>
<td>A look at Carabid patterns and trends</td>
</tr>
<tr>
<td>2:00</td>
<td>Partner projects</td>
</tr>
<tr>
<td>2:45</td>
<td>Q&amp;A</td>
</tr>
<tr>
<td>3:00</td>
<td>------- Wrap Up! -------</td>
</tr>
</tbody>
</table>

<h1>
<a id="about-the-data" class="anchor" href="#about-the-data" aria-hidden="true"><span class="octicon octicon-link"></span></a>About the Data</h1>

<p>The carabid data that we will use for this brown-bag were collected at 13 sites in 2014. NEON carabid data are stored in three tables: field collection data, sorting data and pinning data. </p>

<h2>
<a id="field-collection-data" class="anchor" href="#field-collection-data" aria-hidden="true"><span class="octicon octicon-link"></span></a>Field Collection Data</h2>

<p>Contains information related to the location of each trap (i.e., latitude, longitude, NLCD class) and metadata about the sampling event (i.e., when traps were set, 'setDate'; the date of trap collection, 'collectDate'; the number of days a given trap was in the field, 'daysOfTrapping'). Unique collection events have a unique sampleID (format = plotID.trapID.collectDate).</p>

<p><img src="https://farm6.staticflickr.com/5311/5860792533_d02d0bdf8a_b.jpg" alt="Insect collection by pitfall trapping"></p>

<h2>
<a id="sorting-data" class="anchor" href="#sorting-data" aria-hidden="true"><span class="octicon octicon-link"></span></a>Sorting Data</h2>

<p>Contains information about what specimens were found in traps. Sample types include vertebrate bycatch (herptiles = 'vert bycatch herp'; mammals = 'vert bycatch mam'), non-Carabidae invertebrate bycatch (labelled 'invert bycatch'), and all information about carabids. Older data (2014 and prior) divide Carabid data into two categories: 'common carabid', for which all taxonomic and abundance data is listed in the sorting dataset, and 'other carabid', a catch-all category indicating that the relevant taxonomic and abundance information for specimens with that sampleID is provided in the pinning dataset. Unique records have a unique 'associatedSampleID' (format = plotID.trapID.collectDate.taxonID.tubeID; records where taxonomic information is unknown use shorthand codes based on sampleType-'ib' for invertebrate bycatch, 'vb' for vertebrate bycatch, 'cc' for common carabid, 'oc' for other carabid).</p>

<p><img src="https://farm6.staticflickr.com/5159/5861346198_dcd8fb7a6f_b.jpg" alt="A mixed sample from a Carabid trap"></p>

<h2>
<a id="pinning-data" class="anchor" href="#pinning-data" aria-hidden="true"><span class="octicon octicon-link"></span></a>Pinning data</h2>

<p>Contains information about all carabids that were pinned or pointed. Each sample in the pinning dataset has a unique identifier (individualID). The information in the pinning table are traceable to the sorting data via the a sampleID. Every 'sampleID' in the pinning data matches an 'associatedSampleID' in the sorting dataset. </p>

<p><img src="http://www.boldsystems.org/pics/NEONT/carabid546%2B1259940908.jpg" alt="A pinned Euryderus grossus"></p>

<h2>
<a id="data-format" class="anchor" href="#data-format" aria-hidden="true"><span class="octicon octicon-link"></span></a>Data Format</h2>

<p>When downloaded from the portal, all data is divided by site. To look at all 13 sites from 2014 will require downloading 39 files (one field, sorting and pinning data for each site) and combining the datasheets across all sites for each type of data (i.e., field, sorting and pinning). I've included an R script that combines and cleans the 2014 data for easy use (available here: <a href="code/data-cleanup.R">data-cleanup.R</a>) and the 39 original data files (located here: <a href="data/portal%20download">portal download</a>). However, for those that just want the csv files that are the end result, I have provided them <a href="data/cleaned%20data">here</a>.</p>

<h1>
<a id="looking-at-the-data" class="anchor" href="#looking-at-the-data" aria-hidden="true"><span class="octicon octicon-link"></span></a>Looking at the data</h1>

<h2>
<a id="field-collection" class="anchor" href="#field-collection" aria-hidden="true"><span class="octicon octicon-link"></span></a>Field Collection</h2>

<p>A brief look at the data shows that most sites collect all 40 traps on a 14 day interval; 81% of traps were collected on the 14 day cycle exactly and 62% collected absolutely every trap during a collection bout. Deviations were minor and in more than 85% of cases, field operations staff were able to reach at least 8 of 10 plots.</p>

<pre><code>par(mfrow=c(1,2))
hist(bet_field$daysOfTrapping,xlim=c(0,30),col="black",main="Typical sampling interval",xlab="Days of trapping")
bet_field %&gt;% count(siteID,boutNumber) -&gt; numTrapsDeployed
hist(numTrapsDeployed$n,xlim=c(0,40),col="black",main="Typical number of traps deployed",xlab="Number of traps per site per bout")
</code></pre>

<p><img src="images/sampling%20interval.png" alt=""></p>

<h2>
<a id="trends-and-patterns" class="anchor" href="#trends-and-patterns" aria-hidden="true"><span class="octicon octicon-link"></span></a>Trends and Patterns</h2>

<p>Does latitude explain beetle abundance or richness? The relationship can be examined at the level of the trap, the plot or the site; but the pattern may be driven by substantial variation seen in the middle latitudes. </p>

<pre><code>plot(Dmap,col="#ADA96E",bg='#77BFC7',main='Beetle Abundance by Site',cex.main=3)
sites &lt;- sites[order(sites[,'numCarabidsCaught']),]
sites$intensity &lt;- heat.colors(13)[13:1]
sites$cex &lt;- c(rep(1,4),rep(1.5,2),rep(2,4),rep(2.5,1),rep(3,1),rep(3.5,1))
points(sites$decimalLongitude,sites$decimalLatitude,bg=sites$intensity,cex=sites$cex,pch=21)
</code></pre>

<p><img src="images/by_site_abundance_map.png" alt="Map of beetle abundance"></p>

<pre><code>plot(Dmap,col="#ADA96E",bg='#77BFC7',main='Beetle Richness by Site',cex.main=3)
sites &lt;- sites[order(sites[,'beetleRichness']),]
sites$intensity &lt;- heat.colors(13)[13:1] 
sites$cex &lt;- c(rep(1,4),rep(1.5,2),rep(2,4),rep(2.5,1),rep(3,1),rep(3.5,1))
points(sites$decimalLongitude,sites$decimalLatitude,bg=sites$intensity,cex=sites$cex,pch=21)
</code></pre>

<p><img src="images/by_site_richness_map.png" alt="Map of beetle richness"></p>

<h3>
<a id="plotting-latitudinal-gradients-of-beetle-abundance-and-richness-at-the-trap-level" class="anchor" href="#plotting-latitudinal-gradients-of-beetle-abundance-and-richness-at-the-trap-level" aria-hidden="true"><span class="octicon octicon-link"></span></a>Plotting latitudinal gradients of beetle abundance and richness at the trap level</h3>

<pre><code>plot(bet_field$decimalLatitude,bet_field$beetleAbundance,xlab='Latitude',ylab='Beetle Abundance',pch=21,bg="darkblue")
plot(bet_field$decimalLatitude,bet_field$beetleRichness,xlab='Latitude',ylab='Beetle Richness',pch=21,bg="darkblue")
</code></pre>

<p><img src="images/by_trap.png" alt="Latitudinal gradients of beetle abundance and richness; data at the trap level"></p>

<h3>
<a id="plotting-latitudinal-gradients-of-beetle-abundance-and-richness-at-the-plot-level" class="anchor" href="#plotting-latitudinal-gradients-of-beetle-abundance-and-richness-at-the-plot-level" aria-hidden="true"><span class="octicon octicon-link"></span></a>Plotting latitudinal gradients of beetle abundance and richness at the plot level</h3>

<pre><code>plot(bet_field_plot$decimalLatitude,bet_field_plot$beetleAbundance,xlab='Latitude',ylab='Beetle Abundance',pch=21,bg="turquoise")
plot(bet_field_plot$decimalLatitude,bet_field_plot$beetleRichness,xlab='Latitude',ylab='Beetle Richness',pch=21,bg="turquoise")
</code></pre>

<p><img src="images/by_plot.png" alt="Latitudinal gradients of beetle abundance and richness; data summarized at the plot level"></p>

<h3>
<a id="plotting-latitudinal-gradients-of-beetle-abundance-and-richness-at-the-bout-level" class="anchor" href="#plotting-latitudinal-gradients-of-beetle-abundance-and-richness-at-the-bout-level" aria-hidden="true"><span class="octicon octicon-link"></span></a>Plotting latitudinal gradients of beetle abundance and richness at the bout level</h3>

<pre><code>plot(bet_field_bout$decimalLatitude,bet_field_bout$beetleAbundance,xlab='Latitude',ylab='Beetle Abundance',pch=21,bg="deepskyblue")
plot(bet_field_bout$decimalLatitude,bet_field_bout$beetleRichness,xlab='Latitude',ylab='Beetle Richness',pch=21,bg="deepskyblue")
</code></pre>

<p><img src="images/by_bout.png" alt="Latitudinal gradients of beetle abundance and richness; data summarized at the collection bout level"></p>

<h3>
<a id="precipitation-and-beetle-distributions" class="anchor" href="#precipitation-and-beetle-distributions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Precipitation and beetle distributions</h3>

<p>Precipitation was not homogeneous and largely fell in the southern and eastern US. Patterns of beetle abundance varied accordingly.</p>

<pre><code>plot(Dmap,col="#ADA96E",bg='#77BFC7',main='Precipitation by Site',cex.main=3)
sites &lt;- sites[order(sites[,'prcp']),]
sites$intensity &lt;- c(rep('white',3),rep('lightblue',3),rep('turquoise',3),rep('deepskyblue',2),'blue','darkblue')
sites$cex &lt;- c(rep(1,3),rep(1.5,3),rep(2,3),rep(2.5,2),rep(3,1),rep(3.5,1))
points(sites$decimalLongitude,sites$decimalLatitude,bg=sites$intensity,cex=sites$cex,pch=21)
</code></pre>

<p><img src="images/by_site_rainfall_map.png" alt="Distribution of rainfall at across sites"></p>

<pre><code>plot(bet_field$prcp,bet_field$beetleAbundance,xlab='Precipitation (mm)',ylab='Beetle Abundance per trap',bg='blue',pch=21)
plot(bet_field_plot$prcp,bet_field_plot$beetleAbundance,xlab='Precipitation (mm)',ylab='Beetle Abundance per plot',bg='darkblue',pch=21)
</code></pre>

<p><img src="images/rainfall.png" alt="Effect of rainfall on measured beetle abundance"></p>

<h3>
<a id="habitat-and-beetle-distributions" class="anchor" href="#habitat-and-beetle-distributions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Habitat and beetle distributions</h3>

<p>NLCD class is an included variable describing the habitat in which traps are embedded. Habitat type certainly seems to influence observed abundance and (to a lesser extent) richness.</p>

<pre><code>par(mar=c(15,4.1,4.1,2.5))
nlcd$color &lt;- c('goldenrod',rep('darkolivegreen1',2),'darkolivegreen2','darkolivegreen3',rep('forestgreen',3),'darkgreen')
barplot(nlcd$beetleAbundance,names.arg=nlcd$types,col=nlcd$color,ylab="Beetle Abundance",xlab="",las=2)
barplot(nlcd$beetleRichness,names.arg=nlcd$types,col=nlcd$color,ylab="Beetle Richness",xlab="",las=2)
</code></pre>

<p><img src="images/nlcd_abundance.png" alt="Effect of habitat type on measured beetle abundance">
<img src="images/nlcd_richness.png" alt="Effect of habitat type on measured beetle richness"></p>
        </section>

        <footer>
          Carabid Workshop is maintained by <a href="https://github.com/klevan">klevan</a><br>
          This page was generated by <a href="https://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.
        </footer>

        
      </div>
    </div>
  </body>
</html>
